<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.infStudy.qnaMapper">
   
   <insert id="insert" parameterType="kr.co.infStudy.model.QnaVO">
   
   </insert>
   
   <select id="getQnaDetail" resultType="kr.co.infStudy.dto.qna.QnaDTO">
   		select q_t.q_no, q_t.title as qna_title, u_t.nickname as qna_writer, u_t.img as qna_writer_img, 
   				q_t.reg_dt as qna_reg_date, q_t.content as qna_content
   				from qna q_t, users u_t, lecture l_t
   				where q_t.u_no = u_t.u_no and q_t.l_no = l_t.l_no and q_t.q_no = #{q_no}
   </select>

   <select id="getQnaList" resultType="kr.co.infStudy.dto.qna.QnaDTO" parameterType="java.util.HashMap">
   		select q_t.q_no ,q_t.title as qna_title, u_t.nickname as qna_writer, u_t.img as qna_writer_img, 
   				q_t.reg_dt as qna_reg_date, q_t.content as qna_content
   				from qna q_t, users u_t, lecture l_t
   				where q_t.u_no = u_t.u_no and q_t.l_no = l_t.l_no and l_t.title = #{lecture_title}
   		<if test="search != null">
   			 and content like '%' || #{search} || '%'
   		</if>
   			order by q_t.q_no
   		
   </select>
   
   <update id="update" parameterType="kr.co.infStudy.model.QnaVO">
   
   </update>
   
   <delete id="delete" parameterType="kr.co.infStudy.model.QnaVO">
   
   </delete>
</mapper>