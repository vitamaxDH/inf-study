<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.infStudy.lectureMapper">
   
   <insert id="insert" parameterType="kr.co.infStudy.model.LectureVO">
   
   </insert>
   
	<select id="getLectureInfo" parameterType="java.util.HashMap" resultType="kr.co.infStudy.dto.lecture.LectureDTO">
		
			select lec_t.title, lec_t.content, lec_t.price, lec_t.img, ctg_t.name as category, ins_t.name as teacher
			from lecture lec_t, instructor ins_t, category ctg_t
			where lec_t.i_no = ins_t.i_no and lec_t.ctg_no = ctg_t.ctg_no 
			
			<if test="category_name != null">
				and ctg_t.name = #{category_name}
			</if>
			
			<if test="sort == 'price'">
				order by lec_t.price
			</if>
   </select>

	<select id="getLectureDetail" parameterType="java.lang.String" resultType="kr.co.infStudy.dto.lecture.LectureDetailDTO">
		
			select ins_t.name as teacher, ctg_t.name as category, lec_t.title as lecture_title, cur_t.section,  
			cur_t.title as curriculum_title, cur_t.url, cur_t.playtime, lec_t.img
			from lecture lec_t, instructor ins_t, curriculum cur_t, category ctg_t
			where lec_t.l_no = cur_t.l_no and lec_t.ctg_no = ctg_t.ctg_no and lec_t.i_no = ins_t.i_no
			and lec_t.title = #{lecture_title}
			
   </select>
   
   <select id="select" resultType="kr.co.infStudy.model.LectureVO">
   
   </select>
   
   <update id="update" parameterType="kr.co.infStudy.model.LectureVO">
   
   </update>
   
   <delete id="delete" parameterType="kr.co.infStudy.model.LectureVO">
   
   </delete>
</mapper>